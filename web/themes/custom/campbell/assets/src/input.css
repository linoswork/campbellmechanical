@import "tailwindcss";

/* Scan THEME templates */
@source "./templates/**/*.twig";
/* Scan THEME JS if you add class strings there */
@source "./**/*.js";

/* Scan MODULE templates (correct path from assets/src → /web/modules/custom) */
@source "../../../../../modules/custom/**/templates/**/*.twig";

@layer base {
  /* Overlay sits above most things, but under raised content */
  body::before {
    @apply fixed inset-0 pointer-events-none;
    content: "";
    z-index: 200; /* was 0 -> bump up so it’s visible */

    /* Tunables */
    /* --grid-gap: 56px;
    --grid-color: rgba(8, 28, 48, 0.06);
    --grid-bold-gap: calc(var(--grid-gap) * 4);
    --grid-bold-color: rgba(8, 28, 48, 0.08);
    --veil: rgba(255,255,255,0.85); */

    /* background-image:
      linear-gradient(var(--veil), var(--veil)),
      repeating-linear-gradient(to right,
        var(--grid-color) 0 1px, transparent 1px var(--grid-gap)),
      repeating-linear-gradient(to bottom,
        var(--grid-color) 0 1px, transparent 1px var(--grid-gap)),
      repeating-linear-gradient(to right,
        var(--grid-bold-color) 0 1px, transparent 1px var(--grid-bold-gap)),
      repeating-linear-gradient(to bottom,
        var(--grid-bold-color) 0 1px, transparent 1px var(--grid-bold-gap)); */
  }
}

/* Campbell header (Tailwind) */
@layer components {
  .cm-header { @apply sticky top-0 z-50 bg-white border-b border-black/10; }

  .cm-wrap { @apply max-w-[1200px] mx-auto px-4 py-3.5; }

  .cm-header__grid {
    @apply grid items-center gap-x-5;
    /* true center: logo | nav | cta */
    grid-template-columns: auto 1fr auto;
  }

  .cm-header__logo img { @apply h-20 w-auto block; }

  /* centered nav */
  .cm-header__nav { @apply justify-self-center max-[980px]:hidden; }
  .cm-header__nav ul.menu { @apply list-none flex gap-7 m-0 p-0; }
  .cm-header__nav a { @apply no-underline font-semibold text-[#0f2147] hover:underline; }

  /* right-side phone + CTA */
  .cm-header__cta { @apply flex items-center gap-3.5 justify-self-end; }
  .cm-header__phone { @apply no-underline font-semibold text-[#0f2147] hover:underline; }

  .btn-quote {
    @apply inline-block px-4 py-2.5 rounded-lg bg-[#ef520f] text-white font-bold no-underline hover:brightness-95 transition;
  }
  .cm-hero-video { @apply hidden lg:block w-full h-auto; }  /* video only on lg+ */
  .cm-hero-fallback { @apply block lg:hidden; }             /* image on mobile/tablet */
  .image-only .cm-hero-fallback { @apply block; }           /* ensure image shows if no video */
  .image-only .cm-hero-video { @apply hidden; }             /* belt & suspenders */

   /* Container must have explicit height for Swiper's height:100% logic */
  .cm-hero-slider { @apply relative w-full h-[60vh] lg:h-[70vh] overflow-hidden; }

  /* Children match that height */
  .cm-hero-slider .swiper-wrapper { height: 100%; }
  .cm-hero-slider .swiper-slide   { height: 100%; }

  /* REMOVE the pre-init hiding; let Swiper handle visibility */
  /* .cm-hero-slider .swiper-slide { @apply hidden; } */
  /* .cm-hero-slider .swiper-slide.swiper-slide-active { @apply block; } */

  /* Stage fills the slide; media absolutely covers */
  .cm-hero-stage    { @apply relative w-full h-full; }
  .cm-hero-video,
  .cm-hero-fallback { @apply absolute inset-0 w-full h-full object-cover block; }

  /* Overlay */
  .cm-hero-overlay  { @apply absolute inset-0 z-10 grid place-content-center text-center p-6 md:p-10; }

  /* Always show the fallback image */
  .cm-hero-fallback { @apply block; }

  /* Video is hidden by default; show it on lg only when we explicitly flag it */
  .cm-hero-video    { @apply hidden; }
  @screen lg {
    .has-video .cm-hero-video    { @apply block; }  /* lg: show video when present */
    .has-video .cm-hero-fallback { @apply hidden; } /* lg: hide image only if video exists */
  } .section-grid::before {
    content: "";
    @apply absolute inset-0 pointer-events-none;
    z-index: 10;

    /* Adjust these two lines to “zoom out” or “in” */
    --grid-gap: 40px; /* smaller = more cells visible */
    --grid-bold-gap: calc(var(--grid-gap) * 4);

    --grid-color: rgba(8, 28, 48, 0.05);
    --grid-bold-color: rgba(8, 28, 48, 0.01);

    background-image:
      repeating-linear-gradient(to right, var(--grid-color) 0 1px, transparent 1px var(--grid-gap)),
      repeating-linear-gradient(to bottom, var(--grid-color) 0 1px, transparent 1px var(--grid-gap)),
      repeating-linear-gradient(to right, var(--grid-bold-color) 0 1px, transparent 1px var(--grid-bold-gap)),
      repeating-linear-gradient(to bottom, var(--grid-bold-color) 0 1px, transparent 1px var(--grid-bold-gap));
  }
  .cm-grid-overlay {
    background-image:
    linear-gradient(to right, rgba(0,0,0,.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,.05) 1px, transparent 1px);
    background-size: 40px 40px; /* adjust to match your mockup */
  }
}
